<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Burmese Learn</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Myanmar:wght@400;500;600;700&family=Noto+Sans+Devanagari:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Noto Sans Myanmar', 'Noto Sans Devanagari', 'Segoe UI', sans-serif; }
  </style>
</head>
<body>
  <div id="root"></div>
  
  <script type="text/babel">
// ============================================
// GOOGLE SHEETS CONFIGURATION
// ============================================
const GOOGLE_SHEET_ID = '1it_qxYycDn2P1aUyO38tAiiC77NbPefjN6Bw9xeR-Oc';

const SHEET_GIDS = {
  conversations: '0',
  consonants: '1575080214',
  specialCharacters: '1881483613',
  vowels: '2032073827',
  specialWords: '1662412889',
};

const getSheetURL = (gid) => 
  `https://docs.google.com/spreadsheets/d/${GOOGLE_SHEET_ID}/export?format=csv&gid=${gid}`;

// ============================================
// CSV PARSER
// ============================================
const parseCSV = (csvText) => {
  const lines = csvText.trim().split('\n');
  if (lines.length === 0) return [];
  
  let headerLine = lines[0];
  if (headerLine.charCodeAt(0) === 0xFEFF) {
    headerLine = headerLine.slice(1);
  }
  
  const headers = headerLine.split(',').map(h => h.trim().replace(/"/g, ''));
  const data = [];
  
  for (let i = 1; i < lines.length; i++) {
    const line = lines[i];
    if (!line.trim()) continue;
    
    const values = [];
    let current = '';
    let inQuotes = false;
    
    for (let j = 0; j < line.length; j++) {
      const char = line[j];
      if (char === '"') {
        inQuotes = !inQuotes;
      } else if (char === ',' && !inQuotes) {
        values.push(current.trim().replace(/"/g, ''));
        current = '';
      } else {
        current += char;
      }
    }
    values.push(current.trim().replace(/"/g, ''));
    
    const row = {};
    headers.forEach((header, idx) => {
      row[header] = values[idx] || '';
    });
    data.push(row);
  }
  
  return data;
};

// ============================================
// RATING SYSTEM
// ============================================
const RATINGS = [
  { id: 1, emoji: '‚úì', label: 'Know Well', description: 'Review monthly', color: '#22c55e', days: 30 },
  { id: 2, emoji: 'üí¨', label: "Can't Speak", description: 'Understand but struggle', color: '#3b82f6', days: 7 },
  { id: 3, emoji: '‚úç', label: "Can't Write", description: 'Know meaning only', color: '#f59e0b', days: 3 },
  { id: 4, emoji: 'ü§î', label: "Can't Use", description: "Don't know when", color: '#a855f7', days: 1 },
  { id: 5, emoji: '‚ùå', label: "Don't Know", description: 'Learn from scratch', color: '#ef4444', days: 0 },
];

// ============================================
// MAIN APP COMPONENT
// ============================================
const { useState, useEffect, useRef } = React;

function BurmeseChatbot() {
  // Loading state
  const [isLoading, setIsLoading] = useState(true);
  const [loadError, setLoadError] = useState(null);
  const [loadingStatus, setLoadingStatus] = useState('Connecting to Google Sheets...');
  
  // Data state
  const [consonants, setConsonants] = useState({});
  const [vowels, setVowels] = useState({});
  const [medials, setMedials] = useState({});
  const [specialWords, setSpecialWords] = useState({});
  const [topics, setTopics] = useState([]);
  const [allMessages, setAllMessages] = useState([]);
  const [lookupTable, setLookupTable] = useState({});
  const [sortedPatterns, setSortedPatterns] = useState([]);
  
  // UI state
  const [mode, setMode] = useState('learn');
  const [selectedTopic, setSelectedTopic] = useState(null);
  const [isComplete, setIsComplete] = useState(false);
  
  // Progress state (localStorage)
  const [messageRatings, setMessageRatings] = useState(() => {
    try {
      return JSON.parse(localStorage.getItem('burmese_ratings') || '{}');
    } catch { return {}; }
  });
  const [wrongAnswers, setWrongAnswers] = useState(() => {
    try {
      return JSON.parse(localStorage.getItem('burmese_wrong_answers') || '[]');
    } catch { return []; }
  });
  
  // Load data from Google Sheets
  useEffect(() => {
    loadAllData();
  }, []);
  
  // Build lookup table when data changes
  useEffect(() => {
    if (Object.keys(consonants).length > 0) {
      const lookup = {};
      
      // Priority 1: Medials (longest patterns)
      Object.entries(medials).forEach(([burmese, marathi]) => {
        if (burmese && marathi) lookup[burmese] = marathi;
      });
      
      // Priority 2: Vowels
      Object.entries(vowels).forEach(([burmese, marathi]) => {
        if (burmese && !lookup[burmese]) lookup[burmese] = marathi;
      });
      
      // Priority 3: Consonants
      Object.entries(consonants).forEach(([burmese, data]) => {
        if (burmese && !lookup[burmese]) {
          lookup[burmese] = typeof data === 'string' ? data : data.marathi1;
        }
      });
      
      setLookupTable(lookup);
      setSortedPatterns(Object.keys(lookup).sort((a, b) => b.length - a.length));
    }
  }, [consonants, vowels, medials]);
  
  const loadAllData = async () => {
    setIsLoading(true);
    setLoadError(null);
    
    try {
      // Load Consonants
      setLoadingStatus('Loading consonants...');
      const consRes = await fetch(getSheetURL(SHEET_GIDS.consonants));
      const consText = await consRes.text();
      const consData = parseCSV(consText);
      const consObj = {};
      consData.forEach(row => {
        const burmese = row.Burmese || row.burmese;
        if (burmese) {
          consObj[burmese] = {
            marathi1: row.Marathi1 || row.Marathi || row.marathi1 || '',
            marathi2: row.Marathi2 || row.marathi2 || '',
          };
        }
      });
      setConsonants(consObj);
      
      // Load Vowels
      setLoadingStatus('Loading vowels...');
      const vowRes = await fetch(getSheetURL(SHEET_GIDS.vowels));
      const vowText = await vowRes.text();
      const vowData = parseCSV(vowText);
      const vowObj = {};
      vowData.forEach(row => {
        const burmese = row.Burmese_extra || row.Burmese || row.burmese_extra || row.burmese;
        const marathi = row.Marathi_extra || row.Marathi || row.marathi_extra || row.marathi;
        if (burmese && burmese !== '‚óå' && marathi) {
          vowObj[burmese] = marathi;
        }
      });
      setVowels(vowObj);
      
      // Load Special Characters (Medials)
      setLoadingStatus('Loading medial combinations...');
      const medRes = await fetch(getSheetURL(SHEET_GIDS.specialCharacters));
      const medText = await medRes.text();
      const medData = parseCSV(medText);
      const medObj = {};
      medData.forEach(row => {
        const burmese = row.Burmese_extra || row.Burmese || row.burmese_extra || row.burmese;
        const marathi = row.Marathi || row.marathi;
        if (burmese && marathi && marathi !== '-' && marathi !== '#N/A') {
          medObj[burmese] = marathi;
        }
      });
      setMedials(medObj);
      
      // Load Special Words
      setLoadingStatus('Loading special words...');
      try {
        const specRes = await fetch(getSheetURL(SHEET_GIDS.specialWords));
        const specText = await specRes.text();
        const specData = parseCSV(specText);
        const specObj = {};
        specData.forEach(row => {
          const burmese = row.Burmese || row.burmese;
          const devanagari = row.Devanagari || row.devanagari || row.Marathi || row.marathi;
          if (burmese && devanagari) {
            specObj[burmese] = devanagari;
          }
        });
        setSpecialWords(specObj);
      } catch (e) {
        console.log('Special words sheet empty or error:', e);
      }
      
      // Load Conversations
      setLoadingStatus('Loading conversations...');
      const convRes = await fetch(getSheetURL(SHEET_GIDS.conversations));
      const convText = await convRes.text();
      const convData = parseCSV(convText);
      
      // Parse conversations into topics
      const parsedTopics = [];
      let currentTopic = null;
      
      for (const row of convData) {
        const tag = row.Tag || row.tag || '';
        const burmese = (row.Burmese || row.burmese || '').trim();
        const english = row.English || row.english || '';
        
        if (tag === 'Title') {
          if (currentTopic && currentTopic.messages.length > 0) {
            parsedTopics.push(currentTopic);
          }
          currentTopic = {
            id: parsedTopics.length + 1,
            title: english || 'Untitled',
            description: '',
            messages: [],
          };
        } else if (tag === 'Description' && currentTopic) {
          currentTopic.description = english || '';
        } else if ((tag === 'Bot' || tag === 'User') && currentTopic) {
          if (burmese && burmese !== '-') {
            currentTopic.messages.push({
              id: `${currentTopic.id}-${currentTopic.messages.length}`,
              role: tag.toLowerCase(),
              burmese: burmese,
              english: english,
            });
          }
        } else if (tag === 'End' && currentTopic) {
          if (currentTopic.messages.length > 0) {
            parsedTopics.push(currentTopic);
          }
          currentTopic = null;
        }
      }
      
      if (currentTopic && currentTopic.messages.length > 0) {
        parsedTopics.push(currentTopic);
      }
      
      setTopics(parsedTopics);
      
      // Build allMessages
      const allMsgs = [];
      const seenBurmese = new Set();
      parsedTopics.forEach(topic => {
        topic.messages.forEach((msg, idx) => {
          if (!seenBurmese.has(msg.burmese)) {
            seenBurmese.add(msg.burmese);
            allMsgs.push({
              ...msg,
              topicId: topic.id,
              topicTitle: topic.title,
              nextMessage: idx < topic.messages.length - 1 ? topic.messages[idx + 1] : null,
            });
          }
        });
      });
      setAllMessages(allMsgs);
      
      setLoadingStatus('Ready!');
      
    } catch (error) {
      console.error('Error loading data:', error);
      setLoadError(`Failed to load data: ${error.message}. Make sure Google Sheet is public.`);
    } finally {
      setIsLoading(false);
    }
  };
  
  // Convert Burmese to Devanagari
  const convertToDevanagari = (text) => {
    if (!text || text === '-') return '';
    const trimmed = text.trim();
    
    // Check special words first
    if (specialWords[trimmed]) return specialWords[trimmed];
    
    let result = '';
    let remaining = trimmed;
    
    while (remaining.length > 0) {
      let matched = false;
      
      for (const pattern of sortedPatterns) {
        if (remaining.startsWith(pattern)) {
          result += lookupTable[pattern];
          remaining = remaining.slice(pattern.length);
          matched = true;
          break;
        }
      }
      
      if (!matched) {
        const char = remaining[0];
        if (char === ' ') result += ' ';
        else if (char === '·Åä') result += '‡•§';
        else if (char === '·Åã') result += '‡••';
        else result += char;
        remaining = remaining.slice(1);
      }
    }
    
    return result;
  };
  
  // Add devanagari to messages
  const getMessageWithDevanagari = (msg) => ({
    ...msg,
    devanagari: convertToDevanagari(msg.burmese),
  });
  
  // Save rating
  const saveRating = (messageId, rating) => {
    const newRatings = { ...messageRatings, [messageId]: { rating_id: rating.id, rating_label: rating.label } };
    setMessageRatings(newRatings);
    localStorage.setItem('burmese_ratings', JSON.stringify(newRatings));
  };
  
  // Save wrong answer
  const saveWrongAnswer = (questionId, wrongAnswerId) => {
    const newWrongs = [...wrongAnswers, { question_id: questionId, wrong_answer_id: wrongAnswerId, timestamp: Date.now() }];
    setWrongAnswers(newWrongs);
    localStorage.setItem('burmese_wrong_answers', JSON.stringify(newWrongs));
  };
  
  // Loading screen
  if (isLoading) {
    return (
      <div style={styles.loadingContainer}>
        <div style={styles.loadingSpinner}>üìö</div>
        <div style={styles.loadingText}>Loading from Google Sheets...</div>
        <div style={styles.loadingSubtext}>{loadingStatus}</div>
      </div>
    );
  }
  
  // Error screen
  if (loadError) {
    return (
      <div style={styles.loadingContainer}>
        <div style={{ fontSize: '48px', marginBottom: '16px' }}>‚ùå</div>
        <div style={styles.loadingText}>Error Loading Data</div>
        <div style={{ ...styles.loadingSubtext, color: '#ef4444', maxWidth: '400px', textAlign: 'center' }}>{loadError}</div>
        <button style={{ ...styles.primaryBtn, marginTop: '20px' }} onClick={loadAllData}>
          üîÑ Retry
        </button>
      </div>
    );
  }
  
  return (
    <div style={styles.container}>
      {/* Header */}
      <header style={styles.header}>
        <div style={styles.logo}>
          <div style={styles.logoIcon}>·Äô·Äº</div>
          <div style={styles.logoText}>Burmese Learn</div>
        </div>
        
        <nav style={styles.navTabs}>
          {[
            { id: 'learn', icon: 'üìö', label: 'Learn' },
            { id: 'quiz', icon: 'üéØ', label: 'Quiz' },
            { id: 'review', icon: 'üìä', label: 'Review' },
            { id: 'converter', icon: 'üîß', label: 'Converter' },
          ].map(tab => (
            <button
              key={tab.id}
              style={{
                ...styles.navTab,
                ...(mode === tab.id ? styles.navTabActive : styles.navTabInactive),
              }}
              onClick={() => {
                setMode(tab.id);
                setSelectedTopic(null);
                setIsComplete(false);
              }}
            >
              {tab.icon} {tab.label}
            </button>
          ))}
        </nav>
      </header>
      
      {/* Main Content */}
      <main style={styles.main}>
        {mode === 'learn' && (
          <LearnMode
            topics={topics}
            selectedTopic={selectedTopic}
            setSelectedTopic={setSelectedTopic}
            isComplete={isComplete}
            setIsComplete={setIsComplete}
            getMessageWithDevanagari={getMessageWithDevanagari}
            onWrongAnswer={saveWrongAnswer}
          />
        )}
        
        {mode === 'quiz' && (
          <QuizMode
            topics={topics}
            getMessageWithDevanagari={getMessageWithDevanagari}
            onRating={saveRating}
            onWrongAnswer={saveWrongAnswer}
            RATINGS={RATINGS}
          />
        )}
        
        {mode === 'review' && (
          <ReviewMode
            topics={topics}
            allMessages={allMessages}
            ratings={messageRatings}
            wrongAnswers={wrongAnswers}
            getMessageWithDevanagari={getMessageWithDevanagari}
            RATINGS={RATINGS}
          />
        )}
        
        {mode === 'converter' && (
          <ConverterMode
            convertToDevanagari={convertToDevanagari}
            specialWords={specialWords}
            lookupTable={lookupTable}
          />
        )}
      </main>
      
      {/* Footer */}
      <footer style={styles.footer}>
        <div>Built for Burmese learning ‚Ä¢ {topics.length} topics ‚Ä¢ {allMessages.length} phrases</div>
        <div style={{ marginTop: '4px', fontSize: '11px', color: '#64748b' }}>
          Data from Google Sheets ‚Ä¢ <span style={{ cursor: 'pointer', textDecoration: 'underline' }} onClick={loadAllData}>‚Üª Refresh</span>
        </div>
      </footer>
    </div>
  );
}

// ============================================
// LEARN MODE
// ============================================
function LearnMode({ topics, selectedTopic, setSelectedTopic, isComplete, setIsComplete, getMessageWithDevanagari, onWrongAnswer }) {
  if (!selectedTopic) {
    return <TopicSelector topics={topics} onSelect={setSelectedTopic} />;
  }
  
  if (isComplete) {
    return (
      <div style={styles.completionMessage}>
        <div style={{ fontSize: '64px', marginBottom: '16px' }}>üéâ</div>
        <div style={{ fontSize: '24px', fontWeight: '700', marginBottom: '8px' }}>Conversation Complete!</div>
        <div style={{ color: '#94a3b8' }}>You finished "{selectedTopic.title}"</div>
        <div style={{ marginTop: '24px', display: 'flex', gap: '12px', justifyContent: 'center' }}>
          <button style={styles.primaryBtn} onClick={() => { setIsComplete(false); setSelectedTopic({...selectedTopic}); }}>
            üîÑ Practice Again
          </button>
          <button style={{ ...styles.primaryBtn, background: 'rgba(255,255,255,0.1)' }} onClick={() => { setSelectedTopic(null); setIsComplete(false); }}>
            ‚Üê Choose Topic
          </button>
        </div>
      </div>
    );
  }
  
  return (
    <ChatView
      topic={selectedTopic}
      onBack={() => setSelectedTopic(null)}
      onComplete={() => setIsComplete(true)}
      getMessageWithDevanagari={getMessageWithDevanagari}
      onWrongAnswer={onWrongAnswer}
    />
  );
}

// ============================================
// TOPIC SELECTOR
// ============================================
function TopicSelector({ topics, onSelect }) {
  const [hoveredId, setHoveredId] = useState(null);
  
  if (topics.length === 0) {
    return (
      <div style={styles.emptyState}>
        <div style={{ fontSize: '48px', marginBottom: '16px' }}>üìö</div>
        <div style={{ fontSize: '18px', marginBottom: '8px' }}>No topics found</div>
        <div style={{ color: '#94a3b8' }}>Add conversations to your Google Sheet</div>
      </div>
    );
  }
  
  return (
    <div>
      <h2 style={{ marginBottom: '20px', fontSize: '18px' }}>üìö Choose a topic to practice:</h2>
      <div style={styles.topicGrid}>
        {topics.map((topic) => (
          <div
            key={topic.id}
            style={{
              ...styles.topicCard,
              ...(hoveredId === topic.id ? styles.topicCardHover : {}),
            }}
            onClick={() => onSelect(topic)}
            onMouseEnter={() => setHoveredId(topic.id)}
            onMouseLeave={() => setHoveredId(null)}
          >
            <div style={styles.topicTitle}>{topic.title}</div>
            <div style={styles.topicDesc}>{topic.description || 'Practice conversation'}</div>
            <div style={{ marginTop: '12px', fontSize: '12px', color: '#64748b' }}>
              {topic.messages.length} messages
            </div>
          </div>
        ))}
      </div>
    </div>
  );
}

// ============================================
// CHAT VIEW
// ============================================
function ChatView({ topic, onBack, onComplete, getMessageWithDevanagari, onWrongAnswer }) {
  const [visibleMessages, setVisibleMessages] = useState([]);
  const [currentIndex, setCurrentIndex] = useState(0);
  const [waitingForResponse, setWaitingForResponse] = useState(false);
  const [responseOptions, setResponseOptions] = useState([]);
  const [wrongSelections, setWrongSelections] = useState(new Set());
  const messagesEndRef = useRef(null);
  
  useEffect(() => {
    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
  }, [visibleMessages]);
  
  useEffect(() => {
    setVisibleMessages([]);
    setCurrentIndex(0);
    setWaitingForResponse(false);
    setResponseOptions([]);
    setWrongSelections(new Set());
    
    if (topic.messages.length > 0) {
      showNextMessage(0);
    }
  }, [topic.id]);
  
  const showNextMessage = (index) => {
    if (index >= topic.messages.length) {
      setTimeout(() => onComplete(), 1000);
      return;
    }
    
    const msg = getMessageWithDevanagari(topic.messages[index]);
    
    if (msg.role === 'bot') {
      setTimeout(() => {
        setVisibleMessages(prev => [...prev, msg]);
        setCurrentIndex(index + 1);
        
        if (index + 1 < topic.messages.length && topic.messages[index + 1].role === 'user') {
          const correctResponse = getMessageWithDevanagari(topic.messages[index + 1]);
          const otherResponses = topic.messages
            .filter((m, i) => m.role === 'user' && i !== index + 1)
            .slice(0, 2)
            .map(m => getMessageWithDevanagari(m));
          
          const options = [correctResponse, ...otherResponses].sort(() => Math.random() - 0.5);
          setResponseOptions(options);
          setWaitingForResponse(true);
          setWrongSelections(new Set());
        } else {
          showNextMessage(index + 1);
        }
      }, 800);
    }
  };
  
  const handleResponseSelect = (selectedMsg) => {
    const correctMsg = getMessageWithDevanagari(topic.messages[currentIndex]);
    
    if (selectedMsg.burmese === correctMsg.burmese) {
      setVisibleMessages(prev => [...prev, correctMsg]);
      setWaitingForResponse(false);
      setResponseOptions([]);
      setWrongSelections(new Set());
      setTimeout(() => showNextMessage(currentIndex + 1), 500);
    } else {
      setWrongSelections(prev => new Set([...prev, selectedMsg.id]));
      onWrongAnswer(correctMsg.id, selectedMsg.id);
    }
  };
  
  return (
    <div style={styles.chatContainer}>
      <div style={styles.chatHeader}>
        <div style={styles.chatTitle}>üí¨ {topic.title}</div>
        <button style={styles.backBtn} onClick={onBack}>‚Üê Back</button>
      </div>
      
      <div style={styles.messagesArea}>
        {visibleMessages.map((msg, idx) => (
          <MessageBubble key={idx} message={msg} isBot={msg.role === 'bot'} />
        ))}
        <div ref={messagesEndRef} />
      </div>
      
      {waitingForResponse && (
        <div style={styles.responseOptions}>
          <div style={{ marginBottom: '12px', fontSize: '13px', color: '#94a3b8' }}>
            Choose your response:
          </div>
          {responseOptions.map((opt, idx) => {
            const isWrong = wrongSelections.has(opt.id);
            return (
              <button
                key={idx}
                style={{
                  ...styles.optionBtn,
                  ...(isWrong ? styles.optionBtnWrong : {}),
                }}
                onClick={() => !isWrong && handleResponseSelect(opt)}
                disabled={isWrong}
              >
                {opt.burmese}
                {isWrong && <span style={{ marginLeft: '10px' }}>‚ùå</span>}
              </button>
            );
          })}
        </div>
      )}
    </div>
  );
}

// ============================================
// MESSAGE BUBBLE
// ============================================
function MessageBubble({ message, isBot }) {
  const [showDetails, setShowDetails] = useState(false);
  
  return (
    <div style={{ ...styles.messageBubble, ...(isBot ? styles.botBubble : styles.userBubble) }}>
      <div style={{ ...styles.bubbleContent, ...(isBot ? styles.botBubbleContent : styles.userBubbleContent) }}>
        <div style={styles.burmeseText}>{message.burmese}</div>
        <button style={styles.toggleBtn} onClick={() => setShowDetails(!showDetails)}>
          {showDetails ? '‚ñ≤ Hide' : '‚ñº Show meaning'}
        </button>
        {showDetails && (
          <div style={styles.hiddenContent}>
            <div style={styles.devanagariText}>üîä {message.devanagari || 'N/A'}</div>
            <div style={styles.englishText}>üìù {message.english}</div>
          </div>
        )}
      </div>
    </div>
  );
}

// ============================================
// QUIZ MODE
// ============================================
function QuizMode({ topics, getMessageWithDevanagari, onRating, onWrongAnswer, RATINGS }) {
  const [selectedTopic, setSelectedTopic] = useState(null);
  const [difficulty, setDifficulty] = useState('easy');
  const [currentQuestion, setCurrentQuestion] = useState(null);
  const [showAnswer, setShowAnswer] = useState(false);
  const [userInput, setUserInput] = useState('');
  const [quizMessages, setQuizMessages] = useState([]);
  const [currentIdx, setCurrentIdx] = useState(0);
  const [showRating, setShowRating] = useState(false);
  const [wrongSelections, setWrongSelections] = useState(new Set());
  const [quizComplete, setQuizComplete] = useState(false);
  const [hoveredId, setHoveredId] = useState(null);
  
  // Initialize quiz when topic or difficulty changes
  useEffect(() => {
    if (!selectedTopic) return;
    
    let msgs = selectedTopic.messages.map(m => getMessageWithDevanagari(m));
    
    if (difficulty === 'hard') {
      const hardMsgs = [];
      for (let i = 0; i < selectedTopic.messages.length - 1; i++) {
        if (selectedTopic.messages[i].role === 'bot' && selectedTopic.messages[i + 1].role === 'user') {
          hardMsgs.push({
            ...getMessageWithDevanagari(selectedTopic.messages[i]),
            nextMessage: getMessageWithDevanagari(selectedTopic.messages[i + 1])
          });
        }
      }
      msgs = hardMsgs;
    }
    
    const shuffled = msgs.sort(() => Math.random() - 0.5);
    setQuizMessages(shuffled);
    setCurrentQuestion(shuffled[0] || null);
    setCurrentIdx(0);
    setShowAnswer(false);
    setShowRating(false);
    setWrongSelections(new Set());
    setQuizComplete(false);
  }, [selectedTopic, difficulty]);
  
  const handleNext = () => {
    setShowAnswer(false);
    setUserInput('');
    setShowRating(false);
    setWrongSelections(new Set());
    
    const nextIdx = currentIdx + 1;
    if (nextIdx < quizMessages.length) {
      setCurrentIdx(nextIdx);
      setCurrentQuestion(quizMessages[nextIdx]);
    } else {
      setQuizComplete(true);
    }
  };
  
  const handleRating = (rating) => {
    onRating(currentQuestion.id, rating);
    handleNext();
  };
  
  const getEasyOptions = () => {
    if (!currentQuestion || !selectedTopic) return [];
    const topicMsgs = selectedTopic.messages.map(m => getMessageWithDevanagari(m));
    const others = topicMsgs.filter(m => m.id !== currentQuestion.id).sort(() => Math.random() - 0.5).slice(0, 3);
    return [currentQuestion, ...others].sort(() => Math.random() - 0.5);
  };
  
  const getHardOptions = () => {
    if (!currentQuestion?.nextMessage || !selectedTopic) return [];
    const correctReply = currentQuestion.nextMessage;
    const topicMsgs = selectedTopic.messages.map(m => getMessageWithDevanagari(m));
    const otherReplies = topicMsgs.filter(m => m.role === 'user' && m.id !== correctReply.id).sort(() => Math.random() - 0.5).slice(0, 3);
    return [correctReply, ...otherReplies].sort(() => Math.random() - 0.5);
  };
  
  // Topic Selection
  if (!selectedTopic) {
    return (
      <div style={styles.quizContainer}>
        <h2 style={{ textAlign: 'center', marginBottom: '24px' }}>üéØ Quiz Mode</h2>
        <p style={{ textAlign: 'center', color: '#94a3b8', marginBottom: '24px' }}>Select a topic to quiz yourself:</p>
        <div style={styles.topicGrid}>
          {topics.map((topic) => (
            <div
              key={topic.id}
              style={{ ...styles.topicCard, ...(hoveredId === topic.id ? styles.topicCardHover : {}) }}
              onClick={() => setSelectedTopic(topic)}
              onMouseEnter={() => setHoveredId(topic.id)}
              onMouseLeave={() => setHoveredId(null)}
            >
              <div style={styles.topicTitle}>üéØ {topic.title}</div>
              <div style={styles.topicDesc}>{topic.description || 'Test your knowledge'}</div>
              <div style={{ marginTop: '12px', fontSize: '12px', color: '#64748b' }}>{topic.messages.length} questions</div>
            </div>
          ))}
        </div>
      </div>
    );
  }
  
  // Quiz Complete
  if (quizComplete) {
    return (
      <div style={styles.quizContainer}>
        <div style={styles.completionMessage}>
          <div style={{ fontSize: '64px', marginBottom: '16px' }}>üéâ</div>
          <div style={{ fontSize: '24px', fontWeight: '700', marginBottom: '8px' }}>Quiz Complete!</div>
          <div style={{ color: '#94a3b8' }}>You finished "{selectedTopic.title}"</div>
          <div style={{ marginTop: '24px', display: 'flex', gap: '12px', justifyContent: 'center', flexWrap: 'wrap' }}>
            <button style={styles.primaryBtn} onClick={() => { setQuizComplete(false); setSelectedTopic({...selectedTopic}); }}>üîÑ Try Again</button>
            <button style={{ ...styles.primaryBtn, background: 'rgba(255,255,255,0.1)' }} onClick={() => setSelectedTopic(null)}>‚Üê Choose Topic</button>
          </div>
        </div>
      </div>
    );
  }
  
  if (!currentQuestion) {
    return (
      <div style={styles.quizContainer}>
        <div style={styles.emptyState}>
          <div>No questions available</div>
          <button style={{ ...styles.primaryBtn, marginTop: '16px' }} onClick={() => setSelectedTopic(null)}>‚Üê Choose Topic</button>
        </div>
      </div>
    );
  }
  
  return (
    <div style={styles.quizContainer}>
      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>
        <button style={styles.backBtn} onClick={() => setSelectedTopic(null)}>‚Üê Topics</button>
        <h2 style={{ margin: 0, fontSize: '18px' }}>üéØ {selectedTopic.title}</h2>
        <div style={{ width: '80px' }}></div>
      </div>
      
      <div style={styles.difficultySelector}>
        {[
          { id: 'easy', label: 'üìñ Easy', color: '#22c55e' },
          { id: 'medium', label: '‚úçÔ∏è Medium', color: '#f59e0b' },
          { id: 'hard', label: 'üî• Hard', color: '#ef4444' },
        ].map(d => (
          <button
            key={d.id}
            style={{
              ...styles.difficultyBtn,
              borderColor: difficulty === d.id ? d.color : 'rgba(255,255,255,0.2)',
              background: difficulty === d.id ? `${d.color}20` : 'transparent',
              color: difficulty === d.id ? d.color : '#94a3b8',
            }}
            onClick={() => setDifficulty(d.id)}
          >
            {d.label}
          </button>
        ))}
      </div>
      
      <div style={styles.quizCard}>
        <div style={{ fontSize: '12px', color: '#64748b', marginBottom: '8px' }}>
          Question {currentIdx + 1} of {quizMessages.length}
        </div>
        
        <div style={styles.quizBurmese}>{currentQuestion.burmese}</div>
        
        {difficulty === 'hard' && !showAnswer && (
          <div style={{ color: '#94a3b8', marginBottom: '16px' }}>üìù {currentQuestion.english}</div>
        )}
        
        {difficulty === 'medium' && !showAnswer && (
          <div style={styles.quizHint}>
            <div style={{ color: '#fbbf24', marginBottom: '8px' }}>üîä {currentQuestion.devanagari}</div>
            <div style={{ color: '#94a3b8' }}>üìù {currentQuestion.english}</div>
          </div>
        )}
        
        {difficulty === 'easy' && !showAnswer && (
          <div style={{ marginTop: '20px' }}>
            <div style={{ marginBottom: '12px', color: '#94a3b8' }}>What does this mean?</div>
            {getEasyOptions().map((opt, idx) => {
              const isWrong = wrongSelections.has(opt.id);
              return (
                <button
                  key={idx}
                  style={{ ...styles.optionBtn, ...(isWrong ? styles.optionBtnWrong : {}) }}
                  onClick={() => {
                    if (!isWrong) {
                      if (opt.id === currentQuestion.id) {
                        setShowAnswer(true);
                        setShowRating(true);
                      } else {
                        setWrongSelections(prev => new Set([...prev, opt.id]));
                        onWrongAnswer(currentQuestion.id, opt.id);
                      }
                    }
                  }}
                  disabled={isWrong}
                >
                  {opt.english} {isWrong && '‚ùå'}
                </button>
              );
            })}
          </div>
        )}
        
        {difficulty === 'hard' && !showAnswer && (
          <div style={{ marginTop: '20px' }}>
            <div style={{ marginBottom: '12px', color: '#94a3b8' }}>How would you reply?</div>
            {getHardOptions().map((opt, idx) => {
              const isWrong = wrongSelections.has(opt.id);
              return (
                <button
                  key={idx}
                  style={{ ...styles.optionBtn, ...(isWrong ? styles.optionBtnWrong : {}) }}
                  onClick={() => {
                    if (!isWrong) {
                      if (opt.id === currentQuestion.nextMessage?.id) {
                        setShowAnswer(true);
                        setShowRating(true);
                      } else {
                        setWrongSelections(prev => new Set([...prev, opt.id]));
                        onWrongAnswer(currentQuestion.id, opt.id);
                      }
                    }
                  }}
                  disabled={isWrong}
                >
                  {opt.burmese} {isWrong && '‚ùå'}
                </button>
              );
            })}
          </div>
        )}
        
        {difficulty === 'medium' && !showAnswer && (
          <div>
            <input
              type="text"
              style={styles.quizInput}
              placeholder="Type in Burmese..."
              value={userInput}
              onChange={(e) => setUserInput(e.target.value)}
              onKeyDown={(e) => e.key === 'Enter' && (setShowAnswer(true), setShowRating(true))}
            />
            <button style={{ ...styles.primaryBtn, marginTop: '16px' }} onClick={() => { setShowAnswer(true); setShowRating(true); }}>
              Check Answer
            </button>
          </div>
        )}
        
        {showAnswer && (
          <div style={styles.quizHint}>
            <div style={{ color: '#22c55e', marginBottom: '8px', fontWeight: '600' }}>‚úì Answer:</div>
            {difficulty === 'hard' && currentQuestion.nextMessage ? (
              <>
                <div style={{ fontSize: '24px', marginBottom: '8px' }}>{currentQuestion.nextMessage.burmese}</div>
                <div style={{ color: '#fbbf24', marginBottom: '8px' }}>üîä {currentQuestion.nextMessage.devanagari}</div>
                <div style={{ color: '#e2e8f0' }}>üìù {currentQuestion.nextMessage.english}</div>
              </>
            ) : (
              <>
                <div style={{ color: '#fbbf24', marginBottom: '8px', fontSize: '18px' }}>üîä {currentQuestion.devanagari}</div>
                <div style={{ color: '#e2e8f0', fontSize: '16px' }}>üìù {currentQuestion.english}</div>
              </>
            )}
          </div>
        )}
      </div>
      
      {showRating && (
        <div>
          <div style={{ textAlign: 'center', marginBottom: '16px', color: '#94a3b8' }}>How well did you know this?</div>
          <div style={styles.ratingContainer}>
            {RATINGS.map(rating => (
              <button key={rating.id} style={styles.ratingBtn} onClick={() => handleRating(rating)}>
                <span style={styles.ratingEmoji}>{rating.emoji}</span>
                <div>
                  <div style={styles.ratingLabel}>{rating.label}</div>
                  <div style={styles.ratingDesc}>{rating.description}</div>
                </div>
              </button>
            ))}
          </div>
        </div>
      )}
    </div>
  );
}

// ============================================
// REVIEW MODE
// ============================================
function ReviewMode({ topics, allMessages, ratings, wrongAnswers, getMessageWithDevanagari, RATINGS }) {
  const [selectedRating, setSelectedRating] = useState(null);
  
  const getMessagesByRating = (ratingId) => allMessages.filter(msg => ratings[msg.id]?.rating_id === ratingId);
  const getUnratedMessages = () => allMessages.filter(msg => !ratings[msg.id]);
  
  const wrongAnswerCounts = wrongAnswers.reduce((acc, wa) => {
    acc[wa.question_id] = (acc[wa.question_id] || 0) + 1;
    return acc;
  }, {});
  
  const displayMessages = selectedRating === null 
    ? allMessages 
    : selectedRating === 'unrated' 
      ? getUnratedMessages() 
      : getMessagesByRating(selectedRating);
  
  return (
    <div style={styles.reviewContainer}>
      <h2 style={{ marginBottom: '24px' }}>üìä Review Progress</h2>
      
      <div style={styles.statsGrid}>
        <div style={styles.statCard}>
          <div style={styles.statNumber}>{topics.length}</div>
          <div style={styles.statLabel}>Topics</div>
        </div>
        <div style={styles.statCard}>
          <div style={styles.statNumber}>{allMessages.length}</div>
          <div style={styles.statLabel}>Phrases</div>
        </div>
        <div style={styles.statCard}>
          <div style={styles.statNumber}>{Object.keys(ratings).length}</div>
          <div style={styles.statLabel}>Rated</div>
        </div>
      </div>
      
      <div style={{ marginBottom: '24px' }}>
        <h3 style={{ marginBottom: '12px' }}>Filter by Rating:</h3>
        <div style={{ display: 'flex', flexWrap: 'wrap', gap: '8px' }}>
          <button
            style={{ ...styles.filterBtn, background: selectedRating === null ? 'rgba(255,255,255,0.2)' : 'transparent' }}
            onClick={() => setSelectedRating(null)}
          >
            All ({allMessages.length})
          </button>
          <button
            style={{ ...styles.filterBtn, background: selectedRating === 'unrated' ? 'rgba(255,255,255,0.2)' : 'transparent' }}
            onClick={() => setSelectedRating('unrated')}
          >
            Unrated ({getUnratedMessages().length})
          </button>
          {RATINGS.map(r => (
            <button
              key={r.id}
              style={{ ...styles.filterBtn, borderColor: r.color, background: selectedRating === r.id ? `${r.color}30` : 'transparent' }}
              onClick={() => setSelectedRating(r.id)}
            >
              {r.emoji} ({getMessagesByRating(r.id).length})
            </button>
          ))}
        </div>
      </div>
      
      <div style={styles.messageList}>
        {displayMessages.length === 0 ? (
          <div style={{ textAlign: 'center', color: '#64748b', padding: '40px' }}>No messages in this category</div>
        ) : (
          displayMessages.slice(0, 50).map((msg, idx) => {
            const msgWithDev = getMessageWithDevanagari(msg);
            return (
              <div key={idx} style={styles.reviewCard}>
                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'start' }}>
                  <div>
                    <div style={{ fontSize: '20px', marginBottom: '8px' }}>{msgWithDev.burmese}</div>
                    <div style={{ color: '#fbbf24', fontSize: '14px', marginBottom: '4px' }}>{msgWithDev.devanagari}</div>
                    <div style={{ color: '#94a3b8', fontSize: '14px' }}>{msgWithDev.english}</div>
                  </div>
                  <div style={{ textAlign: 'right' }}>
                    {ratings[msg.id] && (
                      <span style={{ fontSize: '24px' }}>
                        {RATINGS.find(r => r.id === ratings[msg.id].rating_id)?.emoji}
                      </span>
                    )}
                    {wrongAnswerCounts[msg.id] && (
                      <div style={{ color: '#ef4444', fontSize: '12px', marginTop: '8px' }}>
                        ‚ùå {wrongAnswerCounts[msg.id]} mistakes
                      </div>
                    )}
                  </div>
                </div>
              </div>
            );
          })
        )}
      </div>
    </div>
  );
}

// ============================================
// CONVERTER MODE
// ============================================
function ConverterMode({ convertToDevanagari, specialWords, lookupTable }) {
  const [inputText, setInputText] = useState('·Äô·ÄÑ·Ä∫·Äπ·ÄÇ·Äú·Ä¨·Äï·Ä´');
  const [result, setResult] = useState('');
  
  useEffect(() => {
    setResult(convertToDevanagari(inputText));
  }, [inputText]);
  
  const sampleTexts = ['·Äô·ÄÑ·Ä∫·Äπ·ÄÇ·Äú·Ä¨·Äï·Ä´', '·Äî·Ä±·ÄÄ·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·Äú·Ä¨·Ä∏·Åã', '·ÄÄ·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·Äï·Ä´·Äê·Äö·Ä∫·Åã', '·ÄÄ·Äª·Ä±·Ä∏·Äá·Ä∞·Ä∏·Äê·ÄÑ·Ä∫·Äï·Ä´·Äê·Äö·Ä∫'];
  
  return (
    <div style={styles.converterContainer}>
      <h2 style={{ marginBottom: '24px' }}>üîß Converter Tool</h2>
      
      <div style={{ marginBottom: '24px' }}>
        <label style={{ display: 'block', marginBottom: '8px', color: '#94a3b8' }}>Enter Burmese text:</label>
        <input
          type="text"
          value={inputText}
          onChange={(e) => setInputText(e.target.value)}
          style={styles.quizInput}
          placeholder="Type Burmese text..."
        />
      </div>
      
      <div style={{ marginBottom: '24px' }}>
        <div style={{ color: '#94a3b8', marginBottom: '8px', fontSize: '14px' }}>Quick samples:</div>
        <div style={{ display: 'flex', flexWrap: 'wrap', gap: '8px' }}>
          {sampleTexts.map((text, idx) => (
            <button key={idx} onClick={() => setInputText(text)} style={styles.sampleBtn}>{text}</button>
          ))}
        </div>
      </div>
      
      <div style={styles.converterResult}>
        <div style={{ marginBottom: '16px' }}>
          <div style={{ color: '#94a3b8', marginBottom: '4px' }}>Input (Burmese):</div>
          <div style={{ fontSize: '24px' }}>{inputText}</div>
        </div>
        <div>
          <div style={{ color: '#94a3b8', marginBottom: '4px' }}>Output (Devanagari):</div>
          <div style={{ fontSize: '24px', color: '#fbbf24' }}>{result}</div>
          {specialWords[inputText.trim()] && (
            <div style={{ marginTop: '8px', padding: '8px 12px', background: 'rgba(34,197,94,0.2)', borderRadius: '8px', color: '#22c55e', fontSize: '14px' }}>
              ‚ú® Special word match
            </div>
          )}
        </div>
      </div>
      
      <div style={{ marginTop: '24px' }}>
        <h3 style={{ marginBottom: '12px' }}>üìä Data Loaded:</h3>
        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(120px, 1fr))', gap: '12px' }}>
          <div style={styles.miniStatCard}>
            <div style={{ fontSize: '24px', color: '#f59e0b' }}>{Object.keys(lookupTable).length}</div>
            <div style={{ fontSize: '12px', color: '#94a3b8' }}>Patterns</div>
          </div>
          <div style={styles.miniStatCard}>
            <div style={{ fontSize: '24px', color: '#22c55e' }}>{Object.keys(specialWords).length}</div>
            <div style={{ fontSize: '12px', color: '#94a3b8' }}>Special Words</div>
          </div>
        </div>
      </div>
    </div>
  );
}

// ============================================
// STYLES
// ============================================
const styles = {
  container: {
    minHeight: '100vh',
    background: 'linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)',
    fontFamily: "'Noto Sans Myanmar', 'Noto Sans Devanagari', 'Segoe UI', sans-serif",
    color: '#e2e8f0',
  },
  loadingContainer: {
    minHeight: '100vh',
    display: 'flex',
    flexDirection: 'column',
    alignItems: 'center',
    justifyContent: 'center',
    background: 'linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)',
    color: '#e2e8f0',
  },
  loadingSpinner: { fontSize: '48px', marginBottom: '16px' },
  loadingText: { fontSize: '20px', fontWeight: '600' },
  loadingSubtext: { color: '#94a3b8', marginTop: '8px' },
  header: {
    background: 'rgba(255,255,255,0.05)',
    backdropFilter: 'blur(10px)',
    borderBottom: '1px solid rgba(255,255,255,0.1)',
    padding: '16px 24px',
    display: 'flex',
    alignItems: 'center',
    justifyContent: 'space-between',
    flexWrap: 'wrap',
    gap: '16px',
  },
  logo: { display: 'flex', alignItems: 'center', gap: '12px' },
  logoIcon: {
    width: '40px',
    height: '40px',
    background: 'linear-gradient(135deg, #f59e0b, #ef4444)',
    borderRadius: '10px',
    display: 'flex',
    alignItems: 'center',
    justifyContent: 'center',
    fontSize: '20px',
  },
  logoText: {
    fontSize: '20px',
    fontWeight: '700',
    background: 'linear-gradient(90deg, #f59e0b, #ef4444)',
    WebkitBackgroundClip: 'text',
    WebkitTextFillColor: 'transparent',
  },
  navTabs: { display: 'flex', gap: '6px', flexWrap: 'wrap' },
  navTab: {
    padding: '8px 14px',
    borderRadius: '20px',
    border: 'none',
    cursor: 'pointer',
    fontSize: '13px',
    fontWeight: '500',
    transition: 'all 0.2s',
  },
  navTabActive: { background: 'linear-gradient(135deg, #f59e0b, #ef4444)', color: 'white' },
  navTabInactive: { background: 'rgba(255,255,255,0.1)', color: '#94a3b8' },
  main: { maxWidth: '900px', margin: '0 auto', padding: '24px' },
  footer: { textAlign: 'center', padding: '20px', color: '#64748b', fontSize: '12px' },
  emptyState: { textAlign: 'center', padding: '60px 20px', color: '#94a3b8' },
  topicGrid: { display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(200px, 1fr))', gap: '16px' },
  topicCard: {
    background: 'rgba(255,255,255,0.08)',
    borderRadius: '16px',
    padding: '20px',
    cursor: 'pointer',
    transition: 'all 0.3s',
    border: '2px solid transparent',
  },
  topicCardHover: {
    background: 'rgba(255,255,255,0.12)',
    border: '2px solid rgba(245,158,11,0.5)',
    transform: 'translateY(-2px)',
  },
  topicTitle: { fontSize: '18px', fontWeight: '600', marginBottom: '8px' },
  topicDesc: { fontSize: '13px', color: '#94a3b8' },
  chatContainer: {
    background: 'rgba(255,255,255,0.05)',
    borderRadius: '20px',
    overflow: 'hidden',
    border: '1px solid rgba(255,255,255,0.1)',
  },
  chatHeader: {
    background: 'rgba(255,255,255,0.08)',
    padding: '16px 20px',
    display: 'flex',
    alignItems: 'center',
    justifyContent: 'space-between',
    borderBottom: '1px solid rgba(255,255,255,0.1)',
  },
  chatTitle: { fontSize: '16px', fontWeight: '600' },
  backBtn: {
    background: 'rgba(255,255,255,0.1)',
    border: 'none',
    color: '#94a3b8',
    padding: '8px 16px',
    borderRadius: '8px',
    cursor: 'pointer',
    fontSize: '13px',
  },
  messagesArea: { padding: '20px', minHeight: '400px', maxHeight: '500px', overflowY: 'auto' },
  messageBubble: { maxWidth: '80%', marginBottom: '16px' },
  botBubble: { marginRight: 'auto' },
  userBubble: { marginLeft: 'auto' },
  bubbleContent: { padding: '14px 18px', borderRadius: '18px' },
  botBubbleContent: { background: 'rgba(59,130,246,0.2)', borderBottomLeftRadius: '4px' },
  userBubbleContent: { background: 'linear-gradient(135deg, #f59e0b, #ef4444)', borderBottomRightRadius: '4px' },
  burmeseText: { fontSize: '20px', lineHeight: '1.6' },
  toggleBtn: {
    background: 'rgba(255,255,255,0.15)',
    border: 'none',
    color: 'rgba(255,255,255,0.7)',
    padding: '4px 10px',
    borderRadius: '12px',
    fontSize: '11px',
    cursor: 'pointer',
    marginTop: '8px',
  },
  hiddenContent: { marginTop: '10px', padding: '10px', background: 'rgba(0,0,0,0.2)', borderRadius: '8px', fontSize: '14px' },
  devanagariText: { color: '#fbbf24', marginBottom: '4px' },
  englishText: { color: '#94a3b8', fontStyle: 'italic' },
  responseOptions: {
    padding: '16px 20px',
    borderTop: '1px solid rgba(255,255,255,0.1)',
    background: 'rgba(255,255,255,0.03)',
  },
  optionBtn: {
    width: '100%',
    padding: '14px 18px',
    marginBottom: '10px',
    background: 'rgba(255,255,255,0.08)',
    border: '2px solid rgba(255,255,255,0.1)',
    borderRadius: '12px',
    color: '#e2e8f0',
    fontSize: '18px',
    cursor: 'pointer',
    textAlign: 'left',
    transition: 'all 0.2s',
  },
  optionBtnWrong: {
    background: 'rgba(239,68,68,0.3)',
    borderColor: '#ef4444',
    cursor: 'not-allowed',
    opacity: 0.7,
  },
  quizContainer: {
    background: 'rgba(255,255,255,0.05)',
    borderRadius: '20px',
    padding: '30px',
    border: '1px solid rgba(255,255,255,0.1)',
  },
  difficultySelector: { display: 'flex', gap: '12px', marginBottom: '24px', justifyContent: 'center', flexWrap: 'wrap' },
  difficultyBtn: {
    padding: '12px 24px',
    borderRadius: '12px',
    border: '2px solid',
    cursor: 'pointer',
    fontSize: '14px',
    fontWeight: '500',
    transition: 'all 0.2s',
    background: 'transparent',
  },
  quizCard: {
    background: 'rgba(255,255,255,0.08)',
    borderRadius: '16px',
    padding: '30px',
    textAlign: 'center',
    marginBottom: '24px',
  },
  quizBurmese: { fontSize: '32px', marginBottom: '16px', lineHeight: '1.5' },
  quizHint: { background: 'rgba(0,0,0,0.3)', padding: '16px', borderRadius: '12px', marginTop: '16px' },
  quizInput: {
    width: '100%',
    padding: '16px',
    fontSize: '20px',
    background: 'rgba(255,255,255,0.1)',
    border: '2px solid rgba(255,255,255,0.2)',
    borderRadius: '12px',
    color: 'white',
    textAlign: 'center',
    marginTop: '16px',
    boxSizing: 'border-box',
  },
  ratingContainer: { display: 'flex', flexDirection: 'column', gap: '10px' },
  ratingBtn: {
    display: 'flex',
    alignItems: 'center',
    gap: '12px',
    padding: '14px 18px',
    background: 'rgba(255,255,255,0.08)',
    border: '2px solid transparent',
    borderRadius: '12px',
    cursor: 'pointer',
    transition: 'all 0.2s',
    color: '#e2e8f0',
    fontSize: '14px',
    textAlign: 'left',
  },
  ratingEmoji: { fontSize: '24px' },
  ratingLabel: { fontWeight: '600' },
  ratingDesc: { fontSize: '12px', color: '#94a3b8' },
  completionMessage: { textAlign: 'center', padding: '40px' },
  primaryBtn: {
    padding: '14px 32px',
    background: 'linear-gradient(135deg, #f59e0b, #ef4444)',
    border: 'none',
    borderRadius: '12px',
    color: 'white',
    fontSize: '16px',
    fontWeight: '600',
    cursor: 'pointer',
  },
  reviewContainer: {
    background: 'rgba(255,255,255,0.05)',
    borderRadius: '20px',
    padding: '30px',
    border: '1px solid rgba(255,255,255,0.1)',
  },
  statsGrid: { display: 'grid', gridTemplateColumns: 'repeat(3, 1fr)', gap: '16px', marginBottom: '32px' },
  statCard: { background: 'rgba(255,255,255,0.08)', borderRadius: '12px', padding: '20px', textAlign: 'center' },
  statNumber: { fontSize: '32px', fontWeight: '700', color: '#f59e0b' },
  statLabel: { color: '#94a3b8', fontSize: '14px', marginTop: '4px' },
  miniStatCard: { background: 'rgba(255,255,255,0.08)', borderRadius: '10px', padding: '12px', textAlign: 'center' },
  filterBtn: {
    padding: '8px 16px',
    borderRadius: '20px',
    border: '1px solid rgba(255,255,255,0.2)',
    background: 'transparent',
    color: '#e2e8f0',
    cursor: 'pointer',
    fontSize: '13px',
  },
  messageList: { display: 'flex', flexDirection: 'column', gap: '12px' },
  reviewCard: { background: 'rgba(255,255,255,0.08)', borderRadius: '12px', padding: '16px' },
  converterContainer: {
    background: 'rgba(255,255,255,0.05)',
    borderRadius: '20px',
    padding: '30px',
    border: '1px solid rgba(255,255,255,0.1)',
  },
  converterResult: { background: 'rgba(255,255,255,0.08)', borderRadius: '12px', padding: '20px', marginBottom: '24px' },
  sampleBtn: {
    padding: '8px 16px',
    background: 'rgba(255,255,255,0.1)',
    border: 'none',
    borderRadius: '8px',
    color: '#e2e8f0',
    cursor: 'pointer',
    fontSize: '16px',
  },
};

// ============================================
// RENDER APP
// ============================================
ReactDOM.createRoot(document.getElementById('root')).render(<BurmeseChatbot />);
  </script>
</body>
</html>
